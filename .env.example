# ── AtoBot Day-Trading Configuration ──────────────────────────────────────────
# Copy this file to .env and fill in your values.
# AtoBot is a fully autonomous stock day-trading bot using Alpaca.

# ── Exchange ──────────────────────────────────────────────────────────────────
EXCHANGE=alpaca

# ── Alpaca API Keys ───────────────────────────────────────────────────────────
# Get your keys from https://app.alpaca.markets/ → Paper Trading → API Keys
ALPACA_API_KEY=your_alpaca_key_here
ALPACA_API_SECRET=your_alpaca_secret_here
ALPACA_PAPER=true

# ── Symbols & Strategy ───────────────────────────────────────────────────────
SYMBOLS=["AAPL","MSFT","TSLA","NVDA","AMD"]
DEFAULT_STRATEGY=vwap_scalp
# Options: "momentum" (RSI + volume), "orb" (Opening Range Breakout), "vwap_scalp"
# Multi-strategy: run multiple strategies simultaneously (best: VWAP+ORB = $3,194/mo backtest)
STRATEGIES=["vwap_scalp","orb"]
BASE_ORDER_SIZE_USD=500.0
DRY_RUN=true

# ── Market Hours ─────────────────────────────────────────────────────────────
MARKET_HOURS_ONLY=true
FLATTEN_EOD=true
FLATTEN_MINUTES_BEFORE_CLOSE=5

# ── Momentum Strategy ────────────────────────────────────────────────────────
MOMENTUM_RSI_PERIOD=14
MOMENTUM_RSI_OVERSOLD=30.0
MOMENTUM_RSI_OVERBOUGHT=70.0
MOMENTUM_VOLUME_MULTIPLIER=1.5
MOMENTUM_TAKE_PROFIT_PERCENT=2.0
MOMENTUM_STOP_LOSS_PERCENT=1.0

# ── ORB (Opening Range Breakout) Strategy ────────────────────────────────────
ORB_RANGE_MINUTES=15
ORB_BREAKOUT_PERCENT=0.1
ORB_TAKE_PROFIT_PERCENT=1.5
ORB_STOP_LOSS_PERCENT=0.75
ORB_ORDER_SIZE_USD=500.0

# ── VWAP Scalp Strategy ──────────────────────────────────────────────────────
VWAP_BOUNCE_PERCENT=0.15
VWAP_TAKE_PROFIT_PERCENT=0.5
VWAP_STOP_LOSS_PERCENT=0.3
VWAP_ORDER_SIZE_USD=500.0

# ── Risk Management ──────────────────────────────────────────────────────────
MAX_POSITION_SIZE_USD=2000.0
MAX_OPEN_ORDERS=10
DAILY_LOSS_LIMIT_USD=200.0
MAX_DRAWDOWN_PERCENT=5.0
STOP_LOSS_PERCENT=2.0
MAX_DAILY_TRADES=20
PDT_PROTECTION=true
RISK_PER_TRADE_PERCENT=1.0

# ── Polling ───────────────────────────────────────────────────────────────────
POLL_INTERVAL_SECONDS=10

# ── Notifications (optional) ─────────────────────────────────────────────────
NOTIFICATIONS_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ── Persistence ───────────────────────────────────────────────────────────────
DATABASE_URL=sqlite+aiosqlite:///data/atobot.db

# ── Logging ───────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_FILE=logs/atobot.log

# ── Entry Filters ─────────────────────────────────────────────────────────────
# EMA Trend Filter: only enter when price > N-period EMA
# Backtest result: HURTS scalping strategies — blocks 71% of profitable entries
TREND_FILTER_ENABLED=false
TREND_FILTER_EMA_PERIOD=20
TREND_FILTER_TIMEFRAME=15m

# Time-of-Day Filter: skip entries during midday dead zone (low volume / chop)
# Backtest result: +6.6% improvement for VWAP (fewer losses during lunch)
AVOID_MIDDAY=true
MIDDAY_START_HOUR=12
MIDDAY_END_HOUR=14

# ── Trailing Stop ────────────────────────────────────────────────────────────
# Lock in profits by trailing a stop behind the highest price since entry.
# Backtest result: too aggressive when tight (<0.3%), inactive when wide (>0.5%).
# Disabled by default — fixed TP/SL levels perform better for scalping.
TRAILING_STOP_ENABLED=false
TRAILING_STOP_ACTIVATION_PCT=0.5
TRAILING_STOP_DISTANCE_PCT=0.3

# ── Stale Order Cleanup ──────────────────────────────────────────────────────
# Limit orders older than this are automatically cancelled to avoid orphaned orders.
STALE_ORDER_MAX_AGE_SECONDS=1800

# ── ATR Position Sizing ──────────────────────────────────────────────────────
# Size positions based on ATR volatility instead of fixed dollar amounts.
# Formula: quantity = ATR_RISK_DOLLARS / ATR_per_share
ATR_SIZING_ENABLED=false
ATR_SIZING_PERIOD=14
ATR_SIZING_TIMEFRAME=5m
ATR_RISK_DOLLARS=50.0
