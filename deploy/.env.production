# ── AtoBot v2 Production Configuration ────────────────────────────────────────
EXCHANGE=alpaca

# ── Alpaca API Keys ───────────────────────────────────────────────────────────
ALPACA_API_KEY=PKSI4TAWFCMN2GZL7ELQNQFLMR
ALPACA_API_SECRET=BH1oF94L5tUfodCjqsJnzwdh7LvFvECqPY7SDsMpVL5V
ALPACA_PAPER=true

# ── Streaming ─────────────────────────────────────────────────────────────────
STREAMING_ENABLED=true
TRADE_STREAM_ENABLED=true
NEWS_STREAM_ENABLED=false
DATA_FEED=iex

# ── Symbols & Strategy ───────────────────────────────────────────────────────
SYMBOLS=["AAPL","MSFT","TSLA","NVDA","AMD","META","GOOGL","AMZN","AVGO","NFLX","SPY","QQQ","CRM","UBER","MU"]
DEFAULT_STRATEGY=vwap_scalp
STRATEGIES=["vwap_scalp","momentum","swing"]
BASE_ORDER_SIZE_USD=17000.0
DRY_RUN=false

# ── VWAP Scalp Strategy (tuned from backtest) ────────────────────────────────
VWAP_BOUNCE_PERCENT=0.05
VWAP_TAKE_PROFIT_PERCENT=0.4
VWAP_STOP_LOSS_PERCENT=0.50
VWAP_ORDER_SIZE_USD=17000.0

# ── Momentum Strategy (ULTRA-tuned from backtest: +$681/3mo, 61.9% WR) ──────
MOMENTUM_RSI_OVERSOLD=32.0
MOMENTUM_TAKE_PROFIT_PERCENT=2.0
MOMENTUM_STOP_LOSS_PERCENT=1.0
MOMENTUM_VOLUME_MULTIPLIER=1.5
MOMENTUM_ORDER_SIZE_USD=17000.0

# ── ORB Strategy (DISABLED -- loses $3,461/mo in backtest) ───────────────────
# ORB_RANGE_MINUTES=15
# ORB_BREAKOUT_PERCENT=0.1
# ORB_TAKE_PROFIT_PERCENT=1.5
# ORB_STOP_LOSS_PERCENT=0.75
# ORB_ORDER_SIZE_USD=17000.0

# ── Swing Strategy (v2 tuned: +$638/6mo, 67.9% WR, 1.63 PF) ────────────────
SWING_RSI_OVERSOLD=38.0
SWING_RSI_OVERBOUGHT=70.0
SWING_VOLUME_SURGE=1.3
SWING_MIN_CONFLUENCE=2
SWING_TAKE_PROFIT_PCT=3.0
SWING_STOP_LOSS_PCT=1.5
SWING_TRAILING_ACTIVATION_PCT=1.5
SWING_TRAILING_OFFSET_PCT=0.75
SWING_MAX_HOLD_DAYS=5
SWING_MAX_POSITIONS=3
SWING_RISK_PER_TRADE_PCT=3.0
SWING_ORDER_SIZE_USD=250.0
SWING_EQUITY_CAP=500.0
SWING_MAX_GAP_PCT=5.0
SWING_SYMBOLS=AAPL,MSFT,NVDA,TSLA,AMD,META,GOOGL,AMZN

# ── Market Hours ──────────────────────────────────────────────────────────────
MARKET_HOURS_ONLY=true
FLATTEN_EOD=true
FLATTEN_MINUTES_BEFORE_CLOSE=5
FORCE_EOD_FLATTEN=true
EOD_FLATTEN_FAILSAFE_MINUTES=2
EOD_BLOCK_ENTRIES_MINUTES=10

# ── Risk Management ──────────────────────────────────────────────────────────
MAX_POSITION_SIZE_USD=20000.0
MAX_OPEN_ORDERS=10
DAILY_LOSS_LIMIT_USD=2000.0
MAX_DRAWDOWN_PERCENT=5.0
STOP_LOSS_PERCENT=2.0
MAX_DAILY_TRADES=100
PDT_PROTECTION=true
RISK_PER_TRADE_PERCENT=2.0

# ── Circuit Breaker (v5 hardening) ───────────────────────────────────────────
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_SPY_DROP_PCT=4.0
CIRCUIT_BREAKER_PAUSE_MINUTES=30

# ── Gap Filter (v5 hardening) ────────────────────────────────────────────────
GAP_FILTER_ENABLED=true
GAP_FILTER_SPY_THRESHOLD_PCT=2.0
GAP_FILTER_SKIP_MINUTES=15

# ── ATR-Adaptive Stops (v5 hardening) ────────────────────────────────────────
ATR_ADAPTIVE_STOPS=true
ATR_STOP_MULTIPLIER=1.5
ATR_STOP_MAX_WIDENING=3.0
ATR_NORMAL_BASELINE_PCT=0.3

# ── Crisis Sizing (v5 hardening) ─────────────────────────────────────────────
CRISIS_SIZING_ENABLED=true
CRISIS_SIZE_MULTIPLIER=0.5

# ── Polling ───────────────────────────────────────────────────────────────────
POLL_INTERVAL_SECONDS=10

# ── Notifications ─────────────────────────────────────────────────────────────
NOTIFICATIONS_ENABLED=false

# ── Persistence ───────────────────────────────────────────────────────────────
DATABASE_URL=sqlite+aiosqlite:///data/atobot.db

# ── Logging ───────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
LOG_FILE=logs/atobot.log

# ── Filters ───────────────────────────────────────────────────────────────────
TREND_FILTER_ENABLED=false
AVOID_MIDDAY=true
MIDDAY_START_HOUR=12
MIDDAY_END_HOUR=14
TRAILING_STOP_ENABLED=false

# ── MACD Confirmation ────────────────────────────────────────────────────────
MACD_CONFIRMATION_ENABLED=false

# ── Market Scanner ────────────────────────────────────────────────────────────
SCANNER_ENABLED=true

# ── Market Regime Detection ──────────────────────────────────────────────────
REGIME_DETECTION_ENABLED=true

# ── News Intelligence ────────────────────────────────────────────────────────
NEWS_INTEL_ENABLED=true

# ══════════════════════════════════════════════════════════════════════════════
#  TIER 2+ SCALING FEATURES (v2)
# ══════════════════════════════════════════════════════════════════════════════

# ── Short Selling ─────────────────────────────────────────────────────────────
SHORT_SELLING_ENABLED=true

# ── Limit Order Entries ──────────────────────────────────────────────────────
# NOTE: Disabled — 0.02% offset on $600 stocks = $0.12, orders never fill
# and get cancelled by stale order cleanup after 30min.
# Use market orders for reliable fills. If re-enabled, use >=0.10% offset.
LIMIT_ENTRY_ENABLED=false
LIMIT_OFFSET_PCT=0.10

# ── Correlation Risk ─────────────────────────────────────────────────────────
CORRELATION_RISK_ENABLED=true
CORRELATION_LOOKBACK_DAYS=60
CORRELATION_THRESHOLD=0.70
MAX_CORRELATED_EXPOSURE=0.40

# ── Value at Risk ─────────────────────────────────────────────────────────────
VAR_ENABLED=true
VAR_LOOKBACK_DAYS=30
VAR_CONFIDENCE=0.95
VAR_MAX_PORTFOLIO_PCT=0.03

# ── Walk-Forward Optimizer ───────────────────────────────────────────────────
WALK_FORWARD_ENABLED=true
WALK_FORWARD_TRAIN_DAYS=60
WALK_FORWARD_TEST_DAYS=15

# ── Pairs Trading ────────────────────────────────────────────────────────────
PAIRS_TRADING_ENABLED=true
PAIRS=["NVDA:AMD","GOOGL:META","MSFT:AAPL"]
PAIRS_LOOKBACK_DAYS=60
PAIRS_ENTRY_ZSCORE=2.0
PAIRS_EXIT_ZSCORE=0.5
PAIRS_STOP_ZSCORE=3.5
PAIRS_ORDER_SIZE_USD=5000.0

# ── ML Features ──────────────────────────────────────────────────────────────
ML_FEATURES_ENABLED=true
ML_MIN_WIN_PROBABILITY=0.55
ML_MODEL_PATH=data/ml_model.lgb
ML_RETRAIN_INTERVAL=500

# ── Docker ────────────────────────────────────────────────────────────────────
GITHUB_USER=baseelsalah
